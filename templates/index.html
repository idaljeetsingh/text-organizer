<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Text Fetch - Scan QR</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="{{ url_for('static', filename='qrcode.min.js') }}"></script>
</head>
<body>
    <div class="container">
        <h1>Text Fetch</h1>

        {% if protocol == 'https' %}
        <div class="warning">
            <strong>Note:</strong> Accept the "Not Secure" warning on your phone to proceed.
        </div>
        {% endif %}

        <div id="interface-selector">
            <p style="margin-bottom: 0.5rem; text-align: left; font-size: 0.9rem; font-weight: 600;">Network Interface:</p>
            <select id="networkSelect">
                {% for interface in interfaces %}
                <option value="{{ interface.ip }}">{{ interface.name }}</option>
                {% endfor %}
            </select>
        </div>

        <div id="scan-section">
            <p id="instruction">Scan with your mobile camera</p>
            <div id="qrcode"></div>
            <p class="url-text" id="urlDisplay"></p>
        </div>

        <div id="receivedContent">
            <h3 style="margin: 0 0 10px 0;">Success!</h3>
            <div id="textContentDisplay"></div>
            <small>Text copied to clipboard automatically.</small>
            <button id="resetBtn" class="reset-btn">Start Again</button>
        </div>
    </div>

    <script type="text/javascript">
        // Pass protocol and port from Flask to JS
        var protocol = "{{ protocol }}";
        var serverPort = "{{ port }}";
    </script>
    <script src="{{ url_for('static', filename='desktop.js') }}"></script>
</body>
</html>